<?xml version="1.0" encoding="utf-8"?>
<!--
Copyright (c) 2017 QubiQ (http://www.qubiq.es)
License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl)
-->
<openerp>
  <data>
    <template id="ad_report_invoice_payment_mode" inherit_id="account_payment_partner.report_invoice_payment_mode" >
      <xpath expr="//p[@t-if='o.partner_bank_id']" position="replace">
        <div>
          <t t-if="o.payment_mode_id">
            <strong>Payment Method: </strong>
            <span t-field="o.payment_mode_id.name"/>
          </t>
        </div>

        <div>
          <t t-if="o.payment_mode_id.name != 'Recibos domiciliados Banco Sabadell'">
            <strong>Bank Account: </strong>
            <span t-field="o.partner_bank_id.bank_name"/>: IBAN <span t-field="o.partner_bank_id.acc_number"/> - <span t-field="o.partner_bank_id.bank_bic"/>
          </t>
          <t t-if="o.payment_mode_id.name == 'Recibos domiciliados Banco Sabadell'">
            <t t-if="o.partner_id.parent_id">
              <strong>Bank Account: </strong>
              <t t-if="o.partner_id.parent_id.bank_ids">
                <span t-field="o.partner_id.parent_id.bank_ids[0].bank_name"/>: IBAN <span t-field="o.partner_id.parent_id.bank_ids[0].secret_acc"/> - <span t-field="o.partner_id.parent_id.bank_ids[0].bank_bic"/>
              </t>
            </t>
            <t t-if="not o.partner_id.parent_id">
              <strong>Bank Account: </strong>
              <t t-if="o.partner_id.bank_ids">
                <span t-field="o.partner_id.bank_ids[0].bank_name"/>: IBAN <span t-field="o.partner_id.bank_ids[0].secret_acc"/> - <span t-field="o.partner_id.bank_ids[0].bank_bic"/>
              </t>
            </t>
          </t>
        </div>
         <div>
          <t t-if="o.date_due">
            <strong>Due Date: </strong>
            <span t-field="o.date_due"/>
          </t>
        </div>

      </xpath>
    </template>

  </data>
</openerp>